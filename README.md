# NanoGrid Controller

## Overview

This repository contains a MATLAB live script (`.mlx`) and a Simulink model (`.slx`) related to the development and simulation of a **Nanogrid Controller**.
![image (7)](https://github.com/user-attachments/assets/66d96ab9-a496-4580-b152-be7bbff2bd57)
The files model the single agent controller (shown above).



The controller is designed to maximize the utilization of power generated by renewable energy sources, including photovoltaic (PV) panels, wind systems, and any other viable renewable resources, facilitated through the PV system framework. This approach ensures that energy harvested from these sources is efficiently used to meet demand, with a structured preference for power utilization that prioritizes solar energy (PV), followed by wind energy, and subsequently any other available renewable resources, thereby optimizing the energy mix based on availability and sustainability criteria.



Central to the system's design is a sophisticated battery energy storage system (BESS), which plays a pivotal role in balancing energy supply and demand. The BESS's functionality is dynamically adjusted based on its state of charge, influencing its ability to absorb or supply power. At a high state of charge, such as 90%, the battery's power absorption decreases, enhancing its capacity to supply power. This safeguards the battery's integrity and prolongs its service life by preventing stress and degradation. The BESS is dedicated to managing the power requirements of the local nanogrid, ensuring that it does not (in normal conditions) supply energy to external nanogrids or microgrids. In situations where the renewable energy production is insufficient to meet the local demand, the BESS provides the required power, with the quantity of power supplied being directly influenced by the battery's current state of charge. For instance, a battery at a 20% charge level will prioritize absorption over supply, thereby conserving its stored energy for critical needs. The operational parameters, including the charging and discharging rates and the volume of power to be charged or discharged, are meticulously controlled by the system's controller, optimizing the balance between energy conservation and demand fulfillment.



The system prioritizes the energy demands of the local nanogrid, ensuring that power generated from solar and wind sources is first directed to satisfy the immediate load requirements. If the renewable energy production is ample, it fully covers the load demands, after which the surplus energy is used to recharge the BESS, up to a predefined threshold to avert overcharging. Any remaining power after satisfying these priorities is then made available for distribution to adjacent nanogrids, enhancing the overall efficiency and sustainability of the energy network.



Conversely, in scenarios where the output from solar and wind sources falls short of the load demand, the strategy is adjusted to ensure that all available renewable energy is first allocated to meet the critical load requirements. Subsequently, the BESS compensates for any shortfall in the energy supply, prioritizing the distribution of power according to the criticality of the loads, which includes static loads (essential services like lighting and fans), thermostatic loads (such as air conditioners and water heaters, which can be scheduled based on energy availability), and other prioritized demands including electric vehicle (EV) charging. The prioritization of these loads is governed by predefined priority factors, ensuring that the essential services are maintained irrespective of the fluctuating availability of renewable resources. In extreme cases, where both the renewable sources and the BESS are unable to meet the demand, the system may procure energy from neighboring nanogrids or microgrids to fulfill the deficit, thereby maintaining a steady supply.



Furthermore, the controller's design incorporates advanced forecasting and management capabilities, allowing it to act as a dynamic intermediary in the energy exchange between the local nanogrid and neighboring networks. It meticulously evaluates the demand and supply forecasts, identifying opportunities to either source additional power from or supply surplus energy to adjacent nanogrids or microgrids. This not only ensures optimal energy distribution within the local network but also fosters a collaborative energy-sharing ecosystem among the interconnected grids, enhancing the resilience and flexibility of the overall energy infrastructure.

In conclusion, the controller and the associated systems represent a comprehensive and adaptive approach to energy management within nanogrids, leveraging renewable resources, advanced storage solutions, and intelligent load prioritization to ensure a sustainable, efficient, and reliable power supply. This holistic strategy not only addresses the immediate energy needs of the local grid but also contributes to the broader objectives of energy sustainability, resilience, and interconnectivity among distributed energy resources.

### Contents
- **`LPDs_single_agent_tech.mlx`:** A MATLAB live script that provides a detailed explanation and code for the single agent technology.
- **`LPDs_single_agent_tech.slx`:** A Simulink model demonstrating the implementation and simulation of the technology.

## Requirements

- MATLAB R2023a or later
- Simulink
- Additional MATLAB toolboxes (if any are used, list them here)

## Installation

1. Clone the repository:
    ```bash
    git clone https://github.com/TheEnergyNerd/LPDs_single_agent_tech.git
    ```
2. Open MATLAB and navigate to the cloned directory.

## Usage
<img width="942" alt="Screenshot 2024-08-19 at 7 50 03 PM" src="https://github.com/user-attachments/assets/9d6ada7f-985b-4b2b-b4c2-a6a00a664d02">

### MATLAB Live Script
- Open `LPDs_single_agent_tech.mlx` in MATLAB.
- Run the live script to see the code execution and results.

### Simulink Model
- Open `LPDs_single_agent_tech.slx` in MATLAB Simulink.
- Run the simulation to observe the behavior of the single agent technology.

<img width="886" alt="Screenshot 2024-08-19 at 7 49 15 PM" src="https://github.com/user-attachments/assets/b815cc1a-fbd1-4c98-8366-b411f7994a01">

Alter the parameters for the renewable energy generation, storage, and usage systems to your liking. 

## Results

### Simulation Output
This simulation demonstrates a nanogrid controller that can adapt to a variety of different weather + energy generation & usage conditions. All of the variables are alterable, and you can see the performance of the Nanogrids based on the variables you change.
  
## Hardware
You can transform the Matlab and Simulink Code into C/C++ for use in RTOS/PLCs. Here's a link to help get you started: https://www.mathworks.com/help/ecoder/gs/generate-code-by-using-embedded-coder-quick-start.html.

You'll have to put in your correct parameters for this to work.

## Contributing

If you would like to contribute to this project, please fork the repository and submit a pull request.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.



